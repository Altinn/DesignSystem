{"version":3,"sources":["addListExpandHandler.js","altinnDropdown.js","altinnLoader.js","altinnModal.js","altinnQuickhelp.js","autofootnotes.js","clickableRow.js","compareTo.js","contactForm.js","expandContent.js","feedbackToggle.js","handleFocus.js","initializeDatepicker.js","ios11BugWorkaround.js","listSort.js","menuToggleEffect.js","mobileNavigation.js","nestedCheckboxes.js","personSwitcher.js","popover.js","searchFilterView.js","selectableCheckbox.js","setupTruncateLines.js","showPassword.js","toggleFilter.js","toggleInstant.js","togglePanel.js","tooltip.js","validation.js","init.js","cardsToggle.js","fileInputHandler.js","formatter.js","listRowToggle.js","removeListRow.js","toggleSwitch.js","truncateLines.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjFA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AP3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../portal.js","sourcesContent":["var addListExpandHandler = function() {\n  $('body').on('click', '.a-list *[data-toggle=\"collapse\"]', function() {\n    // This script runs before the bootstrap collapse handler, so the collapsed-class will still be\n    // present even though the content is about to be expanded\n    if ($(this).hasClass('collapsed')) {\n      $(this).closest('li').addClass('a-expanded');\n    } else {\n      $(this).closest('li').removeClass('a-expanded');\n    }\n  });\n};\n","/* globals AltinnDropdown */\n/* globals AltinnDropdown:true */\nAltinnDropdown = {\n  init: function() {\n    var that = this;\n    $('body').on('click', '[data-toggle=\"altinn-dropdown\"] .a-dropdown-item', function() {\n      var $dropdownElement = $(this).closest('[data-toggle=\"altinn-dropdown\"');\n      if ($(this).data('value')) {\n        $dropdownElement.find('.a-js-altinnDropdown-value').val($(this).data('value'));\n      }\n\n      $dropdownElement.find('.a-dropdown-toggle').html($(this).html());\n    });\n  }\n};\n","/* globals AltinnLoader:true */\n\nAltinnLoader = {\n  addLoader: function($target) {\n    if ($target.find('.loader-container').length === 0) {\n      $target.prepend('<div class=\"loader-container\"><div class=\"loader loader-ellipsis\"></div></div>');\n    }\n  },\n\n  removeLoader: function($target) {\n    $target.find('.loader-container').remove();\n  }\n};\n","/* globals currentRequest, popoverLocalInit, AltinnModal */\n/* globals AltinnModal:true, AltinnLoader */\nAltinnModal = {\n  closeModal: function(settings) {\n    $('body').removeClass('a-modal-background-error a-displayNav');\n    $('body').removeClass('a-modal-background-success');\n    $(settings.target).modal('hide');\n    $('body').append($('.a-stickyHelp-container'));\n  },\n\n  loadModal: function(settings) {\n    var currentRequest = $.ajax({\n      url: settings.url,\n      beforeSend: function() {\n        if (typeof currentRequest !== 'undefined') {\n          currentRequest.abort();\n        }\n\n        AltinnLoader.addLoader($('body'));\n      },\n      data: settings.data\n    }).always(function() {\n    }).done(function(data) {\n      var modalPage = $('<div/>', {\n        class: 'modalPage',\n        html: data\n      });\n      var page = $('<div/>', {\n        class: 'a-page a-current-page',\n        data: {\n          pageIndex: 1,\n          isSuccess: settings.isSuccess,\n          isError: settings.isError,\n          showModalNav: settings.showModalNav\n        },\n        html: modalPage\n      });\n\n      $('body').removeClass('a-modal-background-error a-displayNav');\n      $('body').removeClass('a-modal-background-success');\n\n      // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\n      //   goToModalHeader();\n      // }\n\n      $(settings.target + ' .a-modal-content-target').append(page);\n      $(settings.target).find('.a-current-page').first().data().enableDirtyPopover = settings.enableDirtyPopover;\n\n      // Initialize with backdrop: static to prevent modal from closing when clicking outside,\n      // and keyboard: false to prevent ESC from closing the modal\n      $(settings.target).modal({\n        backdrop: 'static',\n        keyboard: false\n      });\n\n      $(settings.target).on('hidden.bs.modal', function() {\n        $(settings.target + ' .a-modal-content-target').empty();\n        $(settings.target).attr('aria-hidden', true);\n        $('#altinnModal').siblings('.row').removeClass('d-none');\n      });\n\n      $(settings.target).on('shown.bs.modal', function() {\n        $(settings.target).removeAttr('aria-hidden');\n        $('#altinnModal').siblings('.row').addClass('d-none');\n      });\n      popoverLocalInit();\n\n      if (settings.isError) {\n        $('body').addClass('a-modal-background-error');\n        if (settings.showModalNav) {\n          $('body').addClass('a-displayNav');\n        }\n      } else if (settings.isSuccess) {\n        $('body').addClass('a-modal-background-success');\n      }\n\n      AltinnLoader.removeLoader($('body'));\n      // causes issues in IE11 (blinking quickhelp when modal is open)\n      // $(settings.target).on('transitionend', function() {\n      // $(settings.target).append($('.a-stickyHelp-container'));\n      // });\n    });\n  },\n\n  nextModalPageWithContent: function(settings) {\n    var current;\n    var modalPage = $('<div/>', {\n      class: 'modalPage',\n      html: settings.content\n    });\n\n    var existingPages;\n    var newPage;\n    var newPageIndex;\n\n    existingPages = $(settings.target + ' :data(page-index)');\n\n    if (settings.clearHistory) {\n      newPageIndex = 1;\n    } else {\n      newPageIndex = existingPages.length + 1;\n    }\n\n    if (settings.clearHistory) {\n      $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\n    }\n\n    newPage = $('<div/>', {\n      class: 'a-page a-next-page',\n      data: {\n        pageIndex: newPageIndex,\n        isSuccess: settings.isSuccess,\n        isError: settings.isError,\n        showModalNav: settings.showModalNav\n      },\n      html: modalPage\n    });\n\n    // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\n    //   goToModalHeader();\n    // }\n\n    $(settings.target + ' .a-modal-content-target').append(newPage);\n\n    $(settings.target).animate({\n      scrollTop: 0\n    }, 20);\n\n    current = $(settings.target + ' .a-current-page');\n\n    setTimeout(function() {\n      $('body').removeClass('a-modal-background-error a-displayNav');\n      $('body').removeClass('a-modal-background-success');\n\n      current.removeClass('a-current-page').addClass('a-previous-page');\n      newPage.removeClass('a-next-page').addClass('a-current-page');\n      $(newPage).data().enableDirtyPopover = settings.enableDirtyPopover;\n\n      if (settings.isError) {\n        $('body').addClass('a-modal-background-error');\n        if (settings.showModalNav) {\n          $('body').addClass('a-displayNav');\n        }\n      } else if (settings.isSuccess) {\n        $('body').addClass('a-modal-background-success');\n      }\n    }, 0);\n\n    current.on('transitionend', function() {\n      if (settings.clearHistory) {\n        $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\n      } else {\n        current.hide().off();\n      }\n    });\n\n    popoverLocalInit();\n  },\n\n  nextModalPage: function(settings) {\n    var currentRequest = $.ajax({\n      url: settings.url,\n      beforeSend: function() {\n        if (typeof currentRequest !== 'undefined') {\n          currentRequest.abort();\n        }\n        AltinnLoader.addLoader($(settings.target).find('.a-current-page .a-modal-body'));\n      },\n      data: settings.data\n    }).always(function() {\n    }).done(function(data) {\n      var current;\n      var modalPage = $('<div/>', {\n        class: 'modalPage',\n        html: data\n      });\n\n      var existingPages;\n      var newPage;\n      var newPageIndex;\n\n      existingPages = $(settings.target + ' :data(page-index)');\n\n      if (settings.clearHistory) {\n        newPageIndex = 1;\n      } else {\n        newPageIndex = existingPages.length + 1;\n      }\n\n      if (settings.clearHistory) {\n        $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\n      }\n\n      newPage = $('<div/>', {\n        class: 'a-page a-next-page',\n        data: {\n          pageIndex: newPageIndex,\n          isSuccess: settings.isSuccess,\n          isError: settings.isError,\n          showModalNav: settings.showModalNav\n        },\n        html: modalPage\n      });\n\n      // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\n      //   goToModalHeader();\n      // }\n\n      $(settings.target + ' .a-modal-content-target').append(newPage);\n\n      $(settings.target).animate({\n        scrollTop: 0\n      }, 20);\n\n      current = $(settings.target + ' .a-current-page');\n\n      setTimeout(function() {\n        $('body').removeClass('a-modal-background-error a-displayNav');\n        $('body').removeClass('a-modal-background-success');\n\n        current.removeClass('a-current-page').addClass('a-previous-page');\n        newPage.removeClass('a-next-page').addClass('a-current-page');\n        $(newPage).data().enableDirtyPopover = settings.enableDirtyPopover;\n\n        if (settings.isError) {\n          $('body').addClass('a-modal-background-error');\n          if (settings.showModalNav) {\n            $('body').addClass('a-displayNav');\n          }\n        } else if (settings.isSuccess) {\n          $('body').addClass('a-modal-background-success');\n        }\n      }, 0);\n\n      current.on('transitionend', function() {\n        if (settings.clearHistory) {\n          $(settings.target + ' :data(page-index)').not('.a-current-page').remove();\n        } else {\n          current.hide().off();\n        }\n\n        AltinnLoader.removeLoader(current.find('.a-modal-body'));\n      });\n\n      popoverLocalInit();\n    });\n  },\n\n  previousModalPage: function(settings) {\n    var current;\n    var allPages;\n    var previous;\n    var pagesToPop;\n    var isError;\n    var showModalNav;\n    var isSuccess;\n\n    if (!settings.pagesToPop) {\n      pagesToPop = 1;\n    } else {\n      pagesToPop = settings.pagesToPop;\n    }\n\n    if ($(settings.target + ' .a-current-page').data('page-index') - pagesToPop <= 0) {\n      $(settings.target).one('hidden.bs.modal', function() {\n        $('body').removeClass('a-modal-background-error a-displayNav');\n        $('body').removeClass('a-modal-background-success');\n      });\n\n      $(settings.target).modal('hide');\n      return;\n    }\n\n    current = $(settings.target + ' .a-current-page');\n    allPages = $(settings.target + ' :data(page-index)');\n    previous = allPages.filter(function() {\n      return $(this).data('page-index') === allPages.length - 1;\n    });\n\n    previous.show();\n    isError = $(previous).data().isError;\n    showModalNav = $(previous).data().showModalNav;\n    isSuccess = $(previous).data().isSuccess;\n\n    current.addClass('a-next-page');\n    current.removeClass('a-current-page');\n\n    // if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\n    //   goToModalHeader();\n    // }\n\n    setTimeout(function() {\n      $('body').removeClass('a-modal-background-error a-displayNav');\n      $('body').removeClass('a-modal-background-success');\n\n      previous.addClass('a-current-page').removeClass('a-previous-page');\n\n      if (isError) {\n        $('body').addClass('a-modal-background-error');\n        if (showModalNav) {\n          $('body').addClass('a-displayNav');\n        }\n      } else if (isSuccess) {\n        $('body').addClass('a-modal-background-success');\n      }\n    }, 0);\n\n    current.on('transitionend', function() {\n      var previousPages = allPages.filter(function() {\n        return $(this).data('page-index') > allPages.length - pagesToPop;\n      });\n      previousPages.remove();\n    });\n  },\n\n  setCurrentPageIsDirty: function(target, state) {\n    $(target).find('.a-current-page').first().data().isDirty = state;\n  },\n\n  init: function() {\n    var that = this;\n    $('body').on('click', '[data-toggle=\"altinn-modal\"]', function() {\n      var $source = $(this);\n      if ($source.data().action === 'load') {\n        that.loadModal({\n          url: $source.data().url,\n          target: $source.data().target,\n          enableDirtyPopover: $source.data().enableDirtyPopover\n        });\n      } else if ($source.data().action === 'next') {\n        that.nextModalPage({ url: $source.data().url,\n          target: $source.data().target,\n          isSuccess: $source.data().isSuccess,\n          isError: $source.data().isError,\n          showModalNav: $source.data().showModalNav,\n          clearHistory: $source.data().clearHistory,\n          enableDirtyPopover: $source.data().enableDirtyPopover });\n      } else if ($source.data().action === 'back') {\n        that.previousModalPage({\n          target: $source.data().target,\n          pagesToPop: $source.data().pages\n        });\n      } else if ($source.data().action === 'close') {\n        that.closeModal({ target: $source.data().target });\n      }\n    });\n\n    $('body').on('click', '.a-modal-back', function() {\n      var $modal = $(this).closest('.a-modal');\n      if ($modal.find('.a-current-page').first().data().enableDirtyPopover\n        && $modal.find('.a-current-page').first().data().isDirty) {\n        $(this).popover('show');\n      } else {\n        that.previousModalPage({ target: '#' + $modal[0].id });\n      }\n    });\n\n    $('body').on('click', '.a-modal-close', function() {\n      var $modal = $(this).closest('.a-modal');\n      if ($modal.find('.a-current-page').first().data().enableDirtyPopover\n        && $modal.find('.a-current-page').first().data().isDirty) {\n        $(this).popover('show');\n      } else {\n        that.closeModal({ target: '#' + $modal[0].id });\n      }\n    });\n\n    $('body').on('click', '.a-js-modal-dirtyBackBtn', function() {\n      AltinnModal.previousModalPage({ target: '#' + $(this).closest('.a-modal')[0].id });\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\n    });\n\n    $('body').on('click', '.a-js-modal-dirtyCancelBtn', function() {\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\n    });\n\n    $('body').on('click', '.a-js-modal-dirtyCloseBtn', function() {\n      AltinnModal.closeModal({ target: '#' + $(this).closest('.a-modal')[0].id });\n      $('button[aria-describedby=' + $(this).parent().parent().attr('id') + ']').popover('hide');\n    });\n\n    function urlQuery(query) { // Parse current URL for query value\n      var _query = query.replace(/[[]/, '[').replace(/[\\]]/, '\\\\]');\n      var expr = '[\\\\?&]' + _query + '=([^&#]*)';\n      var regex = new RegExp(expr);\n      var results = regex.exec(window.location.href);\n      if (results !== null) {\n        return results[1];\n      }\n      return false;\n    }\n    if (urlQuery('form') === '1') {\n      AltinnModal.loadModal({\n        url: '/hjelp/kontaktskjema-for-hjelp/',\n        target: '#modal'\n      });\n    }\n  }\n};\n","/* globals currentRequest, AltinnQuickhelp */\n/* globals AltinnQuickhelp:true */\nAltinnQuickhelp = {\n  listeners: function(target) {\n    var that = this;\n    $('.a-stickyHelp-search').find('input').on('keyup', function(e) {\n      var keyCode = e.keyCode || e.which;\n      if (keyCode === 13 && encodeURIComponent($(this)[0].value).length > 0) {\n        that.nextquickhelpPage({\n          url: $('#a-stickyHelp').attr('data-api') +\n            encodeURIComponent($(this)[0].value) + '/' + $('html').attr('lang'),\n          target: target\n        });\n      }\n    });\n    $('.a-stickyHelp-search').find('button').on('click', function(e) {\n      if (encodeURIComponent($('.a-js-stickyhelpSearch')[0].value).length > 0) {\n        that.nextquickhelpPage({\n          url: $('#a-stickyHelp').attr('data-api') +\n            encodeURIComponent($('.a-js-stickyhelpSearch')[0].value) + '/' +\n            $('html').attr('lang'),\n          target: target\n        });\n      }\n    });\n  },\n  nextquickhelpPage: function(settings) {\n    var currentRequest = $.ajax({\n      url: settings.url,\n      beforeSend: function() {\n        if (typeof currentRequest !== 'undefined') {\n          currentRequest.abort();\n        }\n      }\n    }).done(function(data) {\n      var quickhelpPage = $('<div/>', { class: 'quickhelpPage', html: data });\n      var current; var existingPages; var newPage; var newPageIndex;\n      existingPages = $(settings.target + ' :data(page-index)');\n      newPageIndex = existingPages.length + 1;\n      newPage = $('<div/>', {\n        class: 'a-page a-next-page',\n        data: { 'page-index': newPageIndex },\n        html: quickhelpPage\n      });\n      $(settings.target + ' .a-stickyHelp-content-target').append(newPage);\n      $(settings.target).animate({ scrollTop: 0 }, 20);\n      current = $(settings.target + ' .a-current-page');\n      setTimeout(function() {\n        current.removeClass('a-current-page').addClass('a-previous-page');\n        newPage.removeClass('a-next-page').addClass('a-current-page');\n        $(newPage).data();\n      }, 0);\n      current.on('transitionend', function() {\n        if (settings.clearHistory) {\n          $(settings.target + ' :data(page-index)').not('.a-current-page')\n            .remove();\n        } else {\n          current.off();\n        }\n      });\n      $('#a-js-stickyHelp-back').addClass('d-block');\n    });\n  },\n  previousquickhelpPage: function(settings) {\n    var current; var allPages; var previous; var pagesToPop;\n    if (!settings.pagesToPop) {\n      pagesToPop = 1;\n    } else {\n      pagesToPop = settings.pagesToPop;\n    }\n    current = $(settings.target + ' .a-current-page');\n    allPages = $(settings.target + ' :data(page-index)');\n    previous = allPages.filter(function() {\n      return $(this).data('page-index') === allPages.length - 1;\n    });\n    previous.addClass('a-current-page').removeClass('a-next-page');\n    current.removeClass('a-current-page').addClass('a-next-page');\n    setTimeout(function() {\n      previous.addClass('a-current-page').removeClass('a-previous-page');\n    }, 0);\n    current.on('transitionend', function() {\n      var previousPages = allPages.filter(function() {\n        return $(this).data('page-index') > allPages.length - pagesToPop;\n      });\n      previousPages.remove();\n    });\n    if (allPages.length === 2) {\n      $('#a-js-stickyHelp-back').removeClass('d-block');\n    }\n  },\n  init: function() {\n    var that = this; that.listeners('#a-stickyHelp');\n    $('body').on('click', '[data-toggle=\"quickhelp\"]', function() {\n      var $source = $(this);\n      if ($source.data().action === 'next') {\n        that.nextquickhelpPage({\n          url: $source.data().url, target: $source.data().target\n        });\n      } else if ($source.data().action === 'back') {\n        that.previousquickhelpPage({\n          target: $source.data().target, pagesToPop: $source.data().pages\n        });\n      }\n    });\n    $('.a-current-page').data({ 'page-index': 1 });\n    $('.a-js-stickyHelpCategory')\n      .html($('#a-stickyHelp').find('.a-stickyHelp-content-target')\n        .attr('data-category')\n      );\n    $('.a-js-stickyHelpCategoryLink').attr('data-url', $('#a-stickyHelp')\n        .find('.a-stickyHelp-content-target').attr('data-url')\n      );\n    $('body').on('click', '.a-stickyHelp-open', function() {\n      if (!$('.a-js-stickyHelpFrame').attr('src')) {\n        $('.a-js-stickyHelpFrame')\n          .attr('src', $('.a-js-stickyHelpFrame').attr('data-src'));\n      }\n    });\n    if ($('.quickhelpPage').find('.a-text').length !== 0) {\n      $('.quickhelpPage').parent('.a-page').addClass('a-page-hasArticleInside');\n    }\n  }\n};\n","/* globals $ */\nvar autoFootnotes = function() {\n  // Ideally we should have a generic class name here, but it would break\n  // existing articles\n  $('.epi-footnote').not('popovered').each(function(index) {\n    $(this).hide().addClass('popovered');\n    $(this).after(\n      '<a href=\"javascript:void(0)\" ' +\n        'tabindex=\"0\" ' +\n        'class=\"a-linkArea a-helpIconButton a-helpIconButton--blue a-js-togglePopoverIcons\" ' +\n        'role=\"button\" ' +\n        'data-toggle=\"popover\" ' +\n        'data-popover-class=\"footnote\"' +\n        'data-trigger=\"click\"' +\n        'data-popover-content=\"epiFootnote_' + index + '\">' +\n        '<i class=\"ai ai-circle-plus a-js-popoverIconInitial\"></i>' +\n        '<i class=\"ai ai-circle-minus a-js-popoverIconExpanded\"></i>' +\n      '</a>' +\n      '<div id=\"epiFootnote_' + index + '\" style=\"display: none\">' +\n        $(this).html() +\n      '</div>'\n    );\n  });\n};\n","var setupOnKeypress = function() {\n  $('body').on('keydown', '.a-clickable, .a-selectable', function(e) {\n    var key = e.which;\n    if ($(e.target).hasClass('a-clickable') || $(e.target).hasClass('a-selectable')) {\n      if (key === 13) {\n        $(this).click();\n        return false;\n      }\n    }\n    return true;\n  });\n};\n","var compareTo = function(firstItem, secondItem) {\n  var first;\n  var second;\n  if (firstItem === undefined && secondItem === undefined) {\n    return 0;\n  }\n  if (firstItem === undefined) {\n    return 1;\n  }\n  if (secondItem === undefined) {\n    return -1;\n  }\n\n  first = firstItem.toString();\n  second = secondItem.toString();\n  if (first < second) {\n    return -1;\n  }\n\n  if (first > second) {\n    return 1;\n  }\n  return 0;\n};\n","/* globals $ */\nvar contactForm = function() {\n  $('body.a-stickyHelp-body').on('click', '#contact-form-trigger', function() {\n    var ScontactFormLink;\n\n    if (window.parent.$) {\n      ScontactFormLink = window.parent.$('#contact-form-link');\n      if (ScontactFormLink.length > 0) {\n        ScontactFormLink.click();\n        return false;\n      }\n    }\n\n    return true;\n  });\n};\n","var setupExpandContent = function() {\n  var expandContent = function() {\n    $($(this).data('target')).addClass('a-expanded');\n    $(this).hide();\n  };\n\n  $('*[data-toggle=\"altinn-expand\"]').each(function() {\n    var targetHeight;\n    var $target = $($(this).data('target'));\n    $target.removeClass('a-expandable-content');\n    targetHeight = $target.outerHeight();\n    $(this).off('click', expandContent);\n    if (targetHeight > 320) {\n      $target.addClass('a-expandable-content');\n      $target.removeClass('a-expanded');\n      $(this).on('click', expandContent);\n      $(this).show();\n    } else {\n      $(this).hide();\n    }\n  });\n};\n","/* globals $ */\nvar feedbackToggle = function() {\n  if ($('.a-js-feedbackToggle').length > 0) {\n    $('.a-js-feedbackToggle').closest('fieldset').next().hide();\n    $('.a-js-feedbackToggle').closest('fieldset').next().next()\n      .hide();\n    $('.a-js-feedbackToggle').closest('fieldset').next().next()\n      .next()\n      .hide();\n    $('.a-js-feedbackToggle').each(function() {\n      $(this).find('input[type=radio]').change(function() {\n        if ($(this).val() === 'radio1' && $(this).is(':checked')) {\n          $(this).closest('fieldset').next().show();\n          $(this).closest('fieldset').next().next()\n            .hide();\n          $(this).closest('fieldset').next().next()\n            .next()\n            .hide();\n        } else if ($(this).val() === 'radio2' && $(this).is(':checked')) {\n          $(this).closest('fieldset').next().hide();\n          $(this).closest('fieldset').next().next()\n            .show();\n          $(this).closest('fieldset').next().next()\n            .next()\n            .show();\n        }\n      });\n      $(this).closest('form').find('button').on('click', function() {\n        $(this).closest('fieldset').next().show();\n        $(this).closest('fieldset').next().next()\n          .hide();\n        $(this).closest('fieldset').next().next()\n          .next()\n          .hide();\n      }.bind(this));\n    });\n  }\n};\n","/* globals $ */\nvar handleFocus = function() {\n  // If state on input is 'focus', add class to a-input: 'a-input-focus'\n  $('body').on('focus', 'input.form-control', function() {\n    $(this).parent().addClass('a-input-focus');\n  });\n\n  $('body').on('blur', 'input.form-control', function() {\n    $(this).parent().removeClass('a-input-focus');\n  });\n\n  $('.a-radioButtons-stackedList').find('input[type=radio]').change(function() {\n    var me = $(this);\n    if (me.is(':checked')) {\n      me.parent().addClass('a-js-radioParentGray');\n      $('input[type=radio]').each(function() {\n        if ($(this).attr('id') !== me.attr('id') &&\n          $(this).attr('name') === me.attr('name')) {\n          $(this).parent().removeClass('a-js-radioParentGray');\n        }\n      });\n    }\n  });\n};\n","/* globals $ */\nvar initializeDatepicker = function() {\n  var today = ('0' + new Date().getDate()).slice(-2) + '.' + ('0' + (new Date().getMonth() + 1)).slice(-2) + '.' + new Date().getFullYear();\n\n  if ($('.a-overlay-container').length > 0) {\n    $('.a-overlay-container').attr('id', 'picker-container');\n  } else {\n    $('body').attr('id', 'picker-container');\n  }\n\n  $('.form-control.date').each(function() {\n    $(this).val($(this).val() || today);\n  });\n  $('.form-control.date').datepicker({\n    format: 'dd.mm.yyyy',\n    language: 'no',\n    todayHighlight: true,\n    orientation: 'bottom left',\n    autoclose: true,\n    maxViewMode: 0,\n    container: '#picker-container',\n    templates: {\n      leftArrow: '<i class=\"ai ai-back\"></i>',\n      rightArrow: '<i class=\"ai ai-arrowright\"></i>'\n    }\n  }).on('show', function(e) {\n    $('.datepicker').find('table').attr('cellpadding', '0');\n    $('.datepicker').find('table').attr('cellspacing', '0');\n  });\n  if ($('.form-control.date').length > 0) {\n    $('body').on('click', function(e) {\n      $('.datepicker').hide();\n    });\n    $('.form-control.date').on('click', function(e) {\n      e.stopPropagation(); e.preventDefault();\n    });\n    $('.datepicker').on('click', function(e) {\n      e.stopPropagation(); e.preventDefault();\n    });\n  }\n};\n","/* globals enableIOS11Fix, disableIOS11Fix, iOS11BugWorkAround */\n\nvar enableIOS11Fix = function() {\n  // We disable scrolling by hiding everything not in view\n  document.body.style.overflow = 'hidden';\n  document.body.style.position = 'fixed';\n  // It seems we don't need to set these, but I'm leaving there here for now\n  // Should be reversed in the disableIOS11Fix function if we enable them\n  // document.body.style.height = '100%';\n  // document.body.style.width = '100%';\n};\n\nvar disableIOS11Fix = function() {\n  document.body.style.overflow = 'auto';\n  document.body.style.position = 'static';\n};\n\nvar isAffectedPlatform = function() {\n  // Needs to be updated if new versions are affected\n  var ua = navigator.userAgent;\n  var iOS = /iPad|iPhone|iPod/.test(ua);\n  var iOS11 = /OS 11_/.test(ua);\n\n  return (iOS && iOS11);\n};\n\nvar iOS11BugWorkAround = function() {\n  // Detect iOS 11_x affected by cursor position bug\n  // Bug report: https://bugs.webkit.org/show_bug.cgi?id=176896\n  if (isAffectedPlatform()) {\n    // This should run in the parent page only, not in the modal\n    if ($('body.a-stickyHelp-body').length === 0) {\n      // We enable the fix only when the help button is clicked/tapped\n      $('.a-stickyHelp-open').on('click', function() {\n        enableIOS11Fix();\n      });\n    }\n\n    // This should be running inside the iframe\n    $('.a-stickyHelp-close').on('click', function() {\n      // When the close button in the sticky help window is clicked/tapped\n      // we disable the fix, otherwise the page will not scroll\n      window.parent.disableIOS11Fix();\n    });\n  }\n};\n\n","/* globals compareTo */\nvar sortListAlphanumerically = function(src, sortIndex) {\n  var $list = $(src).closest('.a-list-container').find('.a-list');\n  var rows = $list.find('li:not(.a-list-header)');\n  var reverse;\n\n  var active = $(src).hasClass('a-active');\n  if (!active) {\n    $(src).closest('.a-list-container').find('.a-list-sortHeader').removeClass('a-active')\n      .removeClass('a-js-reverse-sort');\n    $(src).addClass('a-active');\n  } else {\n    $(src).toggleClass('a-js-reverse-sort');\n  }\n\n  reverse = $(src).hasClass('a-js-reverse-sort');\n\n  rows.sort(function(a, b) {\n    var A = $($($($(a).children()[0]).children()[sortIndex]).find('.a-js-sortValue')[0]).text()\n      .toUpperCase();\n    var B = $($($($(b).children()[0]).children()[sortIndex]).find('.a-js-sortValue')[0]).text()\n      .toUpperCase();\n    return reverse ? compareTo(B, A) : compareTo(A, B);\n  });\n\n  $.each(rows, function(index, row) {\n    if ($(row).find('.a-js-sortValue').length > 0) {\n      $list.append(row);\n    }\n  });\n\n    // handles load more row\n  $.each(rows, function(index, row) {\n    if ($(row).find('.a-js-sortValue').length === 0) {\n      $list.append(row);\n    }\n  });\n};\n\nvar defaultListSort = function() {\n  $('.a-list-container').each(function() {\n    var sortHeader = $(this).find('.a-list-sortHeader')[0];\n    var index = $(sortHeader).index();\n    sortListAlphanumerically(sortHeader, index);\n  });\n};\n\nvar addListSortHandler = function() {\n  $('.a-list-sortHeader').on('click', function() {\n    var index = $(this).index();\n    sortListAlphanumerically(this, index);\n  });\n\n  defaultListSort();\n};\n","/* globals mobileNavigation */\nvar wasDark = $('header').hasClass('a-darkBackground');\nvar action = function(e) {\n  if ($(e.target).closest('.a-globalNav-main').length === 0 &&\n  $(e.target).closest('.navbar-toggler').length === 0) {\n    if ($('.a-globalNav-main').is(':visible')) {\n      $('.navbar-toggler').attr('data-jsexpanded', 'false');\n      $('.a-globalNav-main').hide();\n      $('body').css('background-color', '');\n      if (wasDark) {\n        $('header').addClass('a-darkBackground');\n        $('.a-globalNav-logo').find('img')\n        .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('blue', 'white'));\n      }\n      $('.a-page').children(':not(header)').removeClass('a-js-hidden');\n    }\n  } else if ($(e.target).closest('.navbar-toggler').length > 0) {\n    if ($('.a-globalNav-main').is(':visible')) {\n      $('.navbar-toggler').attr('data-jsexpanded', 'false');\n      $('.a-globalNav-main').hide();\n      $('body').css('background-color', '');\n      if (wasDark) {\n        $('header').addClass('a-darkBackground');\n        $('.a-globalNav-logo').find('img')\n        .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('blue', 'white'));\n      }\n      $('.a-page').children(':not(header)').removeClass('a-js-hidden');\n    } else {\n      $('.navbar-toggler').attr('data-jsexpanded', 'true');\n      $('.a-globalNav-main').show();\n      $('body').css('background-color', '#fff');\n      if (wasDark) {\n        $('header').removeClass('a-darkBackground');\n        $('.a-globalNav-logo').find('img')\n        .attr('src', $('.a-globalNav-logo').find('img').attr('src').replace('white', 'blue'));\n      }\n      $('.a-page').children(':not(header)').addClass('a-js-hidden');\n    }\n  }\n};\nfunction menuHandler() {\n  // enable tabbing and mouse click on mobile menu btn\n  if ($('body').width() < 768) {\n    $('body').on('click', action);\n  }\n}\nmenuHandler();\n$(window).on('resize', function() {\n  $('body').off('click', action);\n  menuHandler();\n});\n","/* globals $ */\nvar mobileNavigation = function() {\n  $('.a-globalNav .dropdown').on('show.bs.dropdown', function(e) {\n    var that = this;\n    setTimeout(function() {\n      $(that).find('.a-dropdown-languages').addClass('expand');\n      $(that).find('.a-dropdown-languages a').removeAttr('tabindex');\n      $(that).find('.a-dropdown-languages a').removeAttr('aria-hidden');\n    }, 0);\n  });\n\n  $('.a-globalNav .dropdown').on('hide.bs.dropdown', function(e) {\n    $(this).find('.a-dropdown-languages').removeClass('expand');\n    $(this).find('.a-dropdown-languages a').attr('tabindex', '-1');\n    $(this).find('.a-dropdown-languages a').attr('aria-hidden', 'true');\n  });\n};\n","var setupNestedCheckboxes = function() {\n  $('[data-toggle=\"nestedCheckbox\"]').on('change', function() {\n    var target = $(this).data('target');\n    if ($(this).is(':checked')) {\n      $(target).show();\n    } else {\n      $(target).hide();\n    }\n  });\n\n  $('[data-toggle=\"nestedCheckbox\"]').each(function() {\n    if (!$(this).is(':checked')) {\n      $($(this).data('target')).hide();\n    }\n  });\n};\n","$('.a-dropdown-personswitchList').on('click', 'button[data-toggle=\"collapse\"]', function(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  $($(this).data('target')).collapse('toggle');\n});\n","/* globals $ */\nvar popoverLocalInit = function() {\n  var options = {\n    html: true,\n    placement: function(context, source) {\n      var position = $(source).offset();\n      $(context).addClass($(source).attr('data-popover-class'));\n      if ($(source).hasClass('a-js-popoverBig')) {\n        return 'bottom';\n      }\n      if (position.left < 125) {\n        return 'right';\n      }\n      if (position.left > ($(document).width() - $(source).width() - 125)) {\n        return 'left';\n      }\n      return 'bottom';\n    },\n    content: function() {\n      if ($(this).attr('data-popover-content')) {\n        return $('#' + $(this).data('popover-content')).html();\n      }\n      return false;\n    },\n    template: '<div class=\"popover\" role=\"tooltip\"><div class=\"popover-arrow\"></div><div class=\"popover-content\"></div></div>'\n  };\n\n  $('[data-toggle=\"popover\"]').popover(options);\n\n  $('.a-js-togglePopoverIcons').each(function() {\n    // $(this).find('i').eq(1).hide();\n    $(this).find('.a-js-popoverIconExpanded').hide();\n  });\n\n  $('.a-js-popoverIconExpanded').on('click', function() {\n    $('.a-js-popoverIconExpanded').hide();\n    $('.a-js-popoverIconInitial').show();\n    // $(this).hide();\n    // $('.a-js-popoverIconInitial').show();\n  });\n  $('.a-js-popoverIconInitial').on('click', function() {\n    $(this).hide();\n    $(this).parent().find('.a-js-popoverIconExpanded').show();\n  });\n};\n\nvar forceFocusTriggerElement;\nvar popoverGlobalInit = function() {\n  $('body').on('show.bs.popover', '[data-toggle=\"popover\"].a-js-tabable-popover', function(e) {\n    var triggerElement = this;\n    $(triggerElement).closest('.a-modal').scrollTop(0);\n  });\n\n  $('body').on('shown.bs.popover', '[data-toggle=\"popover\"].a-js-tabable-popover', function(e) {\n    var triggerElement = this;\n    setTimeout(function() {\n      $(triggerElement).after($($(triggerElement).data('bs.popover').tip));\n      $(triggerElement).closest('.a-modal').one('scroll', function() {\n        $('[data-toggle=\"popover\"]').popover('hide');\n      });\n    }, 0);\n  });\n\n  $('body').on('shown.bs.popover', '[data-toggle=\"popover\"].a-js-popover-forceFocus', function(e) {\n    $('body').append($('<button class=\"sr-only a-js-popoverTrick\">ignoreme</button>'));\n    forceFocusTriggerElement = this;\n    $(forceFocusTriggerElement).one('blur', function() {\n      var that = this;\n      if (forceFocusTriggerElement) {\n        $($(this).data('bs.popover').tip).find('button,input,a,textarea').filter(':visible:first').focus();\n      }\n    });\n  });\n\n  $('body').on('hidden.bs.popover', '[data-toggle=\"popover\"].a-js-popover-forceFocus', function(e) {\n    $('body').find('.a-js-popoverTrick').remove();\n  });\n\n  // Hide all existing popovers when opening a new popover\n  $('body').on('click', '[data-toggle=\"popover\"]', function(e) {\n    $('[data-toggle=\"popover\"]').not(this).popover('hide');\n  });\n\n  // Hide all existing popovers when focusing a new element\n  // which is not the open popover or any of its content\n  $('body').on('blur', '[data-toggle=\"popover\"], .popover *', function(e) {\n    setTimeout(function() {\n      var $focused = $(':focus');\n      if ((($focused.length !== 0 || forceFocusTriggerElement)\n        && !$focused.hasClass('popover')\n        && !$focused.parents('.popover').length >= 1) || $focused.hasClass('a-js-popoverTrick')) {\n        if (forceFocusTriggerElement) {\n          $(forceFocusTriggerElement).focus();\n          forceFocusTriggerElement = false;\n        }\n\n        $('[data-toggle=\"popover\"]').popover('hide');\n      }\n    }, 0);\n  });\n\n  // Hide popovers when clicking on something else than the trigger element\n  // and the popover itself\n  $('body').on('click', function(e) {\n    if ($(e.target).data('toggle') !== 'popover'\n      && $(e.target).parents('[data-toggle=\"popover\"]').length === 0\n      && $(e.target).parents('.popover.show').length === 0) {\n      $('[data-toggle=\"popover\"]').popover('hide');\n      forceFocusTriggerElement = false;\n      $(this).parent().find('.a-js-popoverIconInitial').show();\n      $(this).parent().find('.a-js-popoverIconExpanded').hide();\n    }\n  });\n\n  function adjustBig() {\n    if ($('.popover-big').length > 0) {\n      $('.popover-big').attr('style',\n        $('.popover-big').attr('style').replace(\n          /translateX\\(.*?\\)/, 'translateX(0px)'\n        )\n      );\n    }\n  }\n\n  // $('body').on('shown.bs.popover', '.a-js-togglePopoverIcons', function(e) {\n  //   $(e.target).find('.a-js-popoverIconInitial').hide();\n  //   $(e.target).find('.a-js-popoverIconExpanded').show();\n  //   // $(e.target).find('i').eq(0).hide();\n  //   // $(e.target).find('i').eq(1).show();\n  // });\n\n  // $('body').on('hidden.bs.popover', '.a-js-togglePopoverIcons', function(e) {\n  //   $(e.target).find('.a-js-popoverIconInitial').show();\n  //   $(e.target).find('.a-js-popoverIconExpanded').hide();\n  //   // $(e.target).find('i').eq(0).show();\n  //   // $(e.target).find('i').eq(1).hide();\n  // });\n\n  $('body').on('shown.bs.popover', '.a-js-persistPopover', function() {\n    // Adjust the popover arrow correctly as the popover fills the full width\n    $('body').append(\n      '<style>.popover-big:after { left: ' + ($(this).offset().left + 10.5) + 'px !important; }</style>');\n    $('html, body').animate({\n      scrollTop: $('.a-js-persistPopover').offset().top - 50\n    }, 250);\n    adjustBig();\n  });\n\n  $(window).scroll(adjustBig);\n  $(window).resize(adjustBig);\n};\n","function searchFilterView() {\n  $(document.body).on('click', '.a-js-searchFilterToggle', function(e) {\n    var hideClass = 'd-none';\n    var hideMainInbox = $('.a-js-hideElement');\n    var searchField = $('.a-js-filterFocus');\n    var searchFilters = $('.a-overlay-container');\n\n    if (searchFilters.hasClass(hideClass)) {\n      searchFilters.removeClass(hideClass);\n      hideMainInbox.addClass(hideClass);\n      searchFilters.removeAttr('tabindex');\n      hideMainInbox.attr('tabindex', '-1');\n      searchField.attr('tabindex', '1').focus();\n      $('input#inbox_search_filter').val($('input#inbox_search').val());\n    } else {\n      searchFilters.addClass(hideClass);\n      hideMainInbox.removeClass(hideClass);\n      searchFilters.attr('tabindex', '-1');\n      hideMainInbox.removeAttr('tabindex');\n      $('input#inbox_search').val($('input#inbox_search_filter').val());\n    }\n  });\n\n  $('.a-overlay-container').on('change', 'input', function(e) {\n    var hideClass = 'd-none';\n    var searchFilerActionWrapper = $('.a-search-filter-action-wrapper');\n\n    if (searchFilerActionWrapper.hasClass(hideClass)) {\n      searchFilerActionWrapper.removeClass(hideClass);\n    }\n  });\n}\n","var setupSelectableCheckbox = function() {\n  $('body').on('change', '.a-js-selectable-checkbox', function() {\n    if ($(this).is(':checked')) {\n      $(this).closest('.a-selectable').addClass('a-selected');\n    } else {\n      $(this).closest('.a-selectable').removeClass('a-selected');\n    }\n  });\n\n  $('body').on('focus', '.a-js-selectable-checkbox', function() {\n    $(this).closest('.a-selectable').addClass('a-focus');\n  });\n\n  $('body').on('blur', '.a-js-selectable-checkbox', function() {\n    $(this).closest('.a-selectable').removeClass('a-focus');\n  });\n};\n","var setupTruncateLines = function() {\n  setTimeout(function() {\n    // Max two lines for all screen sizes\n    $('.a-js-truncate-2').truncate({\n      lines: 2\n    });\n    // Max two lines for screen sizes less than 768\n    // Intit with 3 lines instead of 2 for IE11\n    if (!!window.MSInputMethodContext\n      && !!document.documentMode\n      && window.innerWidth < 768) {\n      $('.a-js-truncate-2-sm-down').truncate({\n        lines: 3\n      });\n    } else {\n      $('.a-js-truncate-2-sm-down').truncate({\n        lines: 2\n      });\n    }\n  }, 1);\n\n  $(window).resize(function() {\n    // Max two lines for all screen sizes\n    $('.a-js-truncate-2').truncate('collapse');\n    $('.a-js-truncate-2').truncate('update');\n\n    // Max two lines for screen sizes less than 768\n    if (window.innerWidth < 768) {\n      $('.a-js-truncate-2-sm-down').truncate('collapse');\n      $('.a-js-truncate-2-sm-down').truncate('update');\n    } else {\n      $('.a-js-truncate-2-sm-down').truncate('expand');\n    }\n  });\n\n  $('.a-collapsePanel-body').on('shown.bs.collapse', function() {\n    var el = $(this).siblings('.a-collapsePanel-heading').find('.a-js-truncate-2-sm-down');\n    if (window.innerWidth < 768) {\n      el.truncate('expand');\n    }\n  });\n\n  $('.a-collapsePanel-body').on('hide.bs.collapse', function() {\n    var el = $(this).siblings('.a-collapsePanel-heading').find('.a-js-truncate-2-sm-down');\n    if (window.innerWidth < 768) {\n      el.truncate('collapse');\n    }\n  });\n};\n","function showPassword(src, target) {\n  var pwd = $('#' + target);\n  if (pwd.attr('type') === 'text') {\n    pwd.attr('type', 'password');\n    $(src).children('.hide-password-text').hide();\n    $(src).children('.show-password-text').show();\n  } else {\n    pwd.attr('type', 'text');\n    $(src).children('.hide-password-text').show();\n    $(src).children('.show-password-text').hide();\n\n    setTimeout(function() {\n      pwd.attr('type', 'password');\n      $(src).children('.hide-password-text').hide();\n      $(src).children('.show-password-text').show();\n    }, 15000);\n  }\n}\n\nfunction setVisibility(passwordField, showPasswordId) {\n  var password = $(passwordField);\n  if (password.val().length > 0) {\n    $('#' + showPasswordId).removeClass('d-none');\n  } else {\n    $('#' + showPasswordId).addClass('d-none');\n  }\n}\n","/* globals $ */\nvar toggleFilter = function() {\n  $('.a-collapse-title').on('keyup', function(e) {\n    var key = e.which;\n    if (key === 13) {\n      e.stopImmediatePropagation(); e.stopPropagation(); e.preventDefault();\n      $(e.target).trigger('mouseup');\n    } else if (key === 9) {\n      if ($($(e.target).attr('data-target')).hasClass('show')) {\n        $($(e.target).attr('data-target')).find('.a-switch').eq(0)\n          .trigger('focus');\n      }\n    }\n  });\n};\n","var toggleInstant = function() {\n  $('.a-panelAccordion').on('click', '*[data-toggle=\"instant\"]', function() {\n    var $target = $(this.dataset.target);\n    if ($target.is(':visible')) {\n      $(this).attr('aria-expanded', false);\n      $target.hide();\n      $(this).removeClass('a-open');\n    } else {\n      $(this).attr('aria-expanded', true);\n      $target.show();\n      $(this).addClass('a-open');\n    }\n  });\n};\n","/* globals\n  setupExpandContent\n*/\n$('body').on('show.bs.collapse', '.a-collapsePanel-body', function() {\n  var that = this;\n\n  setTimeout(function() {\n    var $collapsePanelHeader = $(that).siblings('.a-js-index-heading').first();\n    var $msgIconWrapper = $collapsePanelHeader.find('.a-inboxHeadingContent')\n    .find('.a-msgIconSecondary')\n    .closest('.a-msgIconWrapper');\n\n    $msgIconWrapper.find('.reg')\n      .hide()\n      .siblings('.a-msgIconSecondary')\n      .show();\n\n    $msgIconWrapper.find('span').attr('aria-hidden', true);\n    $msgIconWrapper.find('span:last-of-type').removeAttr('aria-hidden');\n\n    $('.a-collapsePanel').removeClass('expanded');\n    $(that).closest('.a-collapsePanel').addClass('expanded');\n    $('.a-js-index-heading').addClass('dim');\n    $('.a-collapsePanel.expanded').find('.a-js-index-heading').removeClass('dim');\n    setupExpandContent();\n  }, 0);\n});\n\n$('body').on('hide.bs.collapse', '.a-collapsePanel-body', function() {\n  var that = this;\n  setTimeout(function() {\n    var $collapsePanelHeader = $(that).siblings('.a-js-index-heading').first();\n    $collapsePanelHeader.find('.a-inboxHeadingContent').removeClass('a-msgUnread');\n    $(that).closest('.a-collapsePanel').removeClass('expanded');\n    if ($('.a-collapsePanel.expanded').length === 0) {\n      $('.a-js-index-heading').removeClass('dim');\n    } else {\n      $collapsePanelHeader.addClass('dim');\n    }\n  }, 0);\n});\n","/* globals $ */\n// used for popovers\nvar tooltip = function() {\n  $('[data-toggle=\"tooltip\"]').tooltip();\n};\n","var setValidatorSettings = function() {\n  var defaultOptions = {\n    highlight: function(element, errorClass, validClass) {\n      $(element).closest('.form-group').addClass(errorClass);\n    },\n    unhighlight: function(element, errorClass, validClass) {\n      $(element).closest('.form-group').removeClass(errorClass);\n    },\n    focusInvalid: false\n  };\n  $.validator.setDefaults(defaultOptions);\n  $.validator.unobtrusive.options = {\n    errorClass: 'has-error'\n  };\n};\n","/* globals\n  formatOrgNr,\n  cardsToggle,\n  onConfirmDeletionClick,\n  setupListRowSelect,\n  toggleSwitch,\n  truncateBoxButtonNames,\n  onFileInputChange\n*/\nwindow.portalInit = function() {\n  formatOrgNr();\n  cardsToggle();\n  onConfirmDeletionClick();\n  setupListRowSelect();\n  toggleSwitch();\n  truncateBoxButtonNames();\n  onFileInputChange();\n};\nwindow.portalInit();\n","var cardsToggle = function() {\n  $('.a-box-button').on('click', function() {\n    $(this).blur(); // remove blue background on expanded cards\n  });\n};\n","var onFileInputChange = function() {\n  $('.a-js-fileInputChangeHandler').on('focus', function() {\n    $('.a-js-fileInputChangeHandler').closest('label').addClass('a-custom-fileupload--focused');\n  });\n  $('.a-js-fileInputChangeHandler').on('blur', function() {\n    $('.a-js-fileInputChangeHandler').closest('label').removeClass('a-custom-fileupload--focused');\n  });\n};\n\nvar onFileListDeleteClick = function(src) {\n  var $fileListContainer = $(src).closest('.a-js-fileListContainer');\n  $fileListContainer.prev().find('input').val('');\n  $fileListContainer.hide();\n  $fileListContainer.prev().show(); // show file upload btn\n};\n","/* globals $ */\nvar formatOrgNr = function() {\n  $('.a-js-orgNr').on('keyup', function() {\n    var number;\n    this.value = this.value.replace(/ /g, '');\n    number = this.value;\n    this.value = number.replace(/(.{3})/g, '$1 ').trim();\n  });\n};\n","/* globals goBack */\nvar onConfirmDeletionClick = function() {\n  var $list = $('ul[data-list-selectable=\"true\"]');\n  var $segmentDone = $('.segment-done');\n  var goToReceipt = false;\n\n  if ($list.find('li.a-selected:not(.a-list-header)').length === $list.find('li:not(.a-list-header)').length) {\n    goToReceipt = true;\n  } else {\n    $list.find('li.a-selected')\n      .addClass('a-deleted')\n      .addClass('a-disabled')\n      .removeClass('a-selected')\n      .removeAttr('tabindex');\n    $segmentDone.hide();\n  }\n\n  return goToReceipt;\n};\n\nvar handleModalClose = function(src, targetUrl) {\n  var hasSelectedRows = $('ul[data-list-selectable=\"true\"] li.a-selected:not(.a-list-header)').length > 0;\n  if (!hasSelectedRows) {\n    $(src).popover('disable');\n    location.href = targetUrl;\n  }\n};\n\nvar setupListRowSelect = function() {\n  var $list = $('ul[data-list-selectable=\"true\"]');\n  var $segmentDone = $('.segment-done');\n\n  $list.on('click', 'li.a-selectable:not(.a-list-header)', function() {\n    if (!$(this).hasClass('a-deleted')) {\n      $(this).toggleClass('a-selected');\n      if ($list.find('li.a-selected').length > 0) {\n        $segmentDone.show();\n      } else {\n        $segmentDone.hide();\n      }\n    }\n  });\n\n  $('.a-js-add-remove-all').on('click', function() {\n    if ($list.find('li.a-selected:not(.a-list-header)').length === $list.find('li:not(.a-list-header)').length) {\n      $list.find('li:not(.a-list-header)').removeClass('a-selected');\n      $segmentDone.hide();\n    } else {\n      $list.find('li:not(.a-list-header)').addClass('a-selected');\n      $segmentDone.show();\n    }\n  });\n\n  $('.a-js-cancel-deletion').on('click', function() {\n    $list.find('li:not(.a-list-header)').removeClass('a-selected');\n    $segmentDone.hide();\n  });\n};\n","var removeListRow = function(src) {\n  if (src) {\n    $(src).remove();\n  }\n};\n","// Toggles between two components.\n// Each toggable component needs to be referenced by id from data-switch-target attribute of switch\nvar toggleSwitch = function() {\n  var $allWithTarget = $('.switch-container input[data-switch-target]');\n  var allTargets = [];\n  $.each($allWithTarget, function() {\n    $.each($(this).data('switch-target'), function() {\n      allTargets.push(this + '');\n    });\n  });\n\n  $allWithTarget.on('click', function() {\n    var $currentSwitch = $(this);\n    var switchTargets = $currentSwitch.data('switch-target');\n\n    $.each(switchTargets, function() {\n      $('#' + this).show();\n    });\n\n    $.each(allTargets, function() {\n      var hide = true;\n      var outerTarget = this + '';\n\n      $.each(switchTargets, function() {\n        var innerTarget = this + '';\n        if (outerTarget === innerTarget) {\n          hide = false;\n        }\n      });\n\n      if (hide) {\n        $('#' + this).hide();\n      }\n    });\n  });\n};\n","var truncateToNumberOfLines = function(element) {\n  var innerText = $($(element).find('.a-js-inner-text')[0]);\n  var containerHeight = $(element).height();\n\n  if ($(innerText).outerHeight() >= (containerHeight + 5)) {\n    while ($(innerText).outerHeight() >= (containerHeight + 5)) {\n      $(innerText).text(function(index, text) {\n        return text.replace(/\\W*\\s(\\S)*$/, '...');\n      });\n    }\n  }\n};\n\n// adds ellipsis for text that spans over two lines\nvar truncateBoxButtonNames = function() {\n  $('.a-box-button').on('click', function() {\n    $('.a-box-button-name').each(function() {\n      truncateToNumberOfLines($(this));\n    });\n  });\n\n  $('.a-collapsePanel-body').on('shown.bs.collapse', function() {\n    $('.a-box-button-name').each(function() {\n      truncateToNumberOfLines($(this));\n    });\n  });\n};\n"]}